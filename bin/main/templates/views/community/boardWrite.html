<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/default_layout}">

<div layout:fragment="content">
    <style>
        .card { border: none; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
        .card-header { background-color: #fff; border-bottom: 1px solid #eee; padding: 1.5rem; }
    </style>

	<div class="container my-5">
		<div class="card">
			<div class="card-header">
				<h1 class="h4 mb-0">새 글 작성</h1>
			</div>
			<div class="card-body p-4">
				<form id="writeForm" action="/boards" method="post">
					<div class="mb-3">
						<label for="category" class="form-label">카테고리</label> 
                        <select class="form-select" id="category" name="category" required>
							<option value="" disabled selected>카테고리를 선택하세요</option>
							<option value="Java">Java</option>
							<option value="Spring">Spring</option>
							<option value="Python">Python</option>
							<option value="JavaScript">JavaScript</option>
							<option value="자유">자유</option>
						</select>
					</div>
					<div class="mb-3">
						<label for="title" class="form-label">제목</label> 
                        <input type="text" class="form-control" id="title" name="title" placeholder="제목을 입력하세요" required>
					</div>
					<div class="mb-3">
						<label for="content" class="form-label">내용</label>
						<div id="summernote"></div>
						<textarea id="content" name="content" style="display: none;"></textarea>
					</div>
					<div class="d-flex justify-content-end">
						<a href="/boards" class="btn btn-secondary me-2"> <i class="bi bi-x-lg"></i> 취소</a>
						<button type="submit" class="btn btn-primary">
							<i class="bi bi-check-lg"></i> 저장
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<th:block layout:fragment="script">
    <script>
        $(document).ready(function() {
            $('#summernote').summernote({
                // z-index 문제를 근본적으로 해결하는 가장 확실한 옵션입니다.
                // 모달창을 body 태그 바로 아래에 생성하여 다른 요소의 영향을 받지 않게 합니다.
                dialogsInBody: true,
                
                placeholder: '내용을 입력하세요',
                tabsize: 2,
                height: 300,
                toolbar: [
                    ['style', ['style']],
                    ['font', ['bold', 'underline', 'clear']],
                    ['color', ['color']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['table', ['table']],
                    ['insert', ['link', 'picture', 'video']],
                    ['view', ['fullscreen', 'codeview', 'help']]
                ]
            });

            $('#writeForm').on('submit', function() {
                var summernoteContent = $('#summernote').summernote('code');
                $('#content').val(summernoteContent);
            });
        });
    </script>
</th:block>
</html>