<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">
 
<th:block layout:fragment="content">
  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-lg-10 col-xl-8">
        <div class="text-center mb-4">
          <h2 class="fw-bold fs-2">팀 모집 글 작성</h2>
        </div>

        <div class="card">
          <div class="card-body p-4 p-md-5">
            <form th:action="@{/recruit/write}" th:object="${teamRecruit}"
                  method="post" enctype="multipart/form-data" id="recruitWriteForm">          
        
              <h4 class="fw-bold mb-3">공모전 정보</h4>
              <div class="border rounded-3 p-3 mb-4">
                <div class="mb-3 row g-2 align-items-center">
                  <label for="contestTitle" class="col-sm-3 col-form-label">공모전 페이지 URL</label>
                  <div class="col-sm-9">
                    <div class="input-group">
                      <input type="url" class="form-control" id="contestTitle" th:field="*{contestTitle}" placeholder="https://..." required>
                      <button type="button" class="btn btn-outline-secondary" id="btnContestPreview">미리보기</button>
                    </div>
                  </div>
                </div>
                <div id="contestPreviewBox" class="border p-3 text-center d-none bg-light rounded-3">
                  <div class="mb-2" id="contestPreviewImageWrapper">
                    <img id="contestPreviewImage" src="" alt="공모전 미리보기 이미지" class="img-fluid" style="max-height:150px; display:none;">
                  </div>
                  <div class="mb-2 fw-bold" id="contestPreviewTitle"></div>
                  <div class="small text-muted mb-2" id="contestPreviewDesc"></div>
                  <a id="contestPreviewLink" href="#" target="_blank" class="btn btn-outline-primary btn-sm">공모전 바로가기</a>
                </div>
              </div>

              <h4 class="fw-bold mb-3">모집 정보</h4>
              <div class="border rounded-3 p-3 mb-4">
                <div class="row">
                  <div class="col-md-6 mb-3 mb-md-0">
                    <div class="mb-3">
                      <label class="form-label fw-semibold">모집 분류</label>
                      <div>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input recruitTypeChk" type="checkbox" value="TEAM_RECRUIT" id="rType1"><label class="form-check-label" for="rType1">팀원 구인</label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input recruitTypeChk" type="checkbox" value="TEAM_JOIN" id="rType2"><label class="form-check-label" for="rType2">팀 참가</label>
                        </div>
                        <input type="hidden" th:field="*{recruitType}" id="recruitTypeHidden"/>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="status" class="form-label fw-semibold">모집 상태</label>	
                      <select name="status" id="status" class="form-select">
                        <option value="RECRUITING">모집중</option>
                        <option value="COMPLETED">모집완료</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label fw-semibold">모집 인원 (총 / 남은)</label>
                      <div class="input-group">
                        <input type="number" class="form-control" th:field="*{totalMembers}" id="totalMembers" placeholder="총">
                        <input type="number" class="form-control" th:field="*{remainingMembers}" id="remainingMembers" placeholder="남은">
                      </div>
                    </div>
                    <div class="mb-3">
                      <label class="form-label fw-semibold">모집 기간</label>
                      <div class="input-group">
                        <input type="date" class="form-control" id="recruitStartDate"><input type="date" class="form-control" id="recruitEndDate">
                      </div>
                      <input type="hidden" th:field="*{recruitPeriod}" id="recruitperiodHidden"/>
                    </div>
                    <div>
                      <label class="form-label fw-semibold">활동 기간</label>
                      <div class="input-group">
                        <input type="date" class="form-control" id="activityStartDate"><input type="date" class="form-control" id="activityEndDate">
                      </div>
                      <input type="hidden" th:field="*{activityPeriod}" id="activityPeriodHidden"/>
                    </div>
                  </div>
        
                  <div class="col-md-6">
                    <div class="mb-3">
                      <label class="form-label fw-semibold">진행 방식</label>
                      <div>
                        <div class="form-check form-check-inline"><input class="form-check-input progressTypeChk" type="checkbox" value="ONLINE" id="pType1"><label class="form-check-label" for="pType1">온라인</label></div>
                        <div class="form-check form-check-inline"><input class="form-check-input progressTypeChk" type="checkbox" value="OFFLINE" id="pType2"><label class="form-check-label" for="pType2">오프라인</label></div>
                        <div class="form-check form-check-inline"><input class="form-check-input progressTypeChk" type="checkbox" value="MIXED" id="pType3"><label class="form-check-label" for="pType3">혼합</label></div>
                        <input type="hidden" th:field="*{progressType}" id="progressTypeHidden"/>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="contact" class="form-label fw-semibold">연락 방법</label>
                      <input type="text" class="form-control" th:field="*{contact}" id="contact">
                    </div>
                    <div class="mb-3">
                      <label for="techStackInput" class="form-label fw-semibold">기술 스택</label>
                      <input type="text" class="form-control" id="techStackInput" placeholder="예: Java, Spring 입력 후 Enter">
                      <div id="techTagContainer" class="mt-2 d-flex flex-wrap gap-2"></div>
                      <input type="hidden" th:field="*{techStack}" id="techStackHidden"/>
                    </div>
                    <div>
                      <label for="applyGuide" class="form-label fw-semibold">지원 방법</label>
                      <textarea class="form-control" th:field="*{applyGuide}" id="applyGuide" rows="2"></textarea>
                    </div>
                  </div>
                </div>
              </div>
        
              <h4 class="fw-bold mb-3">게시글 내용</h4>
              <div class="border rounded-3 p-3 mb-4">
                <div class="mb-3">
                  <label for="title" class="form-label fw-semibold">제목</label>
                  <input type="text" class="form-control" th:field="*{title}" id="title" required>
                </div>
                <div class="mb-3">
                  <label for="content" class="form-label fw-semibold">내용</label>
                  <textarea class="form-control" th:field="*{content}" id="content" rows="8" required></textarea>
                </div>
                <div>
                  <label for="attachmentFile" class="form-label fw-semibold">첨부파일</label>
                  <input type="file" class="form-control" name="attachmentFile" id="attachmentFile">
                </div>
              </div>
        
              <div class="d-flex justify-content-end gap-2">
                <a th:href="@{/teamRecruitList}" class="btn btn-secondary">취소</a>
                <button type="submit" class="btn btn-primary">등록하기</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
	
	<th:block layout:fragment="script">
	    <script src="/js/recruitWrite.js" defer></script>	
	</th:block>
</html>