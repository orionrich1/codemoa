<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">

<head>
    <title>CodeMoa: 개발자들을 위한 모든 것</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <style>
        .slider-card { display: block; text-decoration: none; color: var(--text-primary); }
        .cover-image { width: 100%; height: 180px; object-fit: cover; border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0; }
        .card-texts { padding: 1.25rem; }
        .card-texts strong { font-weight: var(--font-weight-bold); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; min-height: 2.5em; }
        .card-texts .metadata { font-size: 1.4rem; color: var(--text-secondary); margin-top: 0.5rem; }
        .swiper-pagination-bullet-active { background-color: var(--brand-primary); }
        .swiper-container-wrapper { position: relative; }
        .swiper-custom-controls { display: flex; gap: 0.5rem; margin-top: 1rem; justify-content: flex-end; }
        .swiper-custom-button { background-color: var(--surface-light); color: var(--text-secondary); border: 1px solid var(--line-default); border-radius: var(--border-radius-md); width: 40px; height: 40px; cursor: pointer; transition: all 0.2s ease; }
        .swiper-custom-button:hover { background-color: var(--brand-primary); color: var(--text-inverse); border-color: var(--brand-primary); }
    </style>
</head>

<div layout:fragment="content">
    
    <div class="container text-center py-5 my-md-5">
        <h1 class="display-4 fw-bold">성장하는 개발자들을 위한<br>모든 것, CodeMoa</h1>
        <p class="lead text-secondary mt-4">AI와 함께 코딩 문제를 해결하고, 동료들과 지식을 나누며<br class="d-none d-md-block">새로운 기회를 탐색하세요.</p>
        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mt-5">
            <a th:href="@{/problems}" class="btn btn-primary btn-lg px-4">AI 코딩 문제 풀기</a>
            <a th:href="@{/community/free}" class="btn btn-outline-secondary btn-lg px-4">커뮤니티 둘러보기</a>
        </div>
    </div>

    <div class="container px-4 py-5" id="featured-services">
        <h2 class="text-center fw-bold fs-1 pb-2 border-bottom">핵심 서비스</h2>
        <div class="row g-4 py-5 row-cols-1 row-cols-md-2 row-cols-lg-4">
             <div class="col text-center"><a th:href="@{/problems}" class="text-decoration-none"><div class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3 rounded-3" style="width: 4.5rem; height: 4.5rem;"><i class="bi bi-cpu"></i></div><h3 class="fs-4 text-primary">AI 코딩 문제</h3><p class="text-secondary">다양한 난이도의 알고리즘 문제를 AI와 함께 해결하며 코딩 실력을 향상시키세요.</p></a></div>
             <div class="col text-center"><a th:href="@{/community/free}" class="text-decoration-none"><div class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3 rounded-3" style="width: 4.5rem; height: 4.5rem;"><i class="bi bi-people-fill"></i></div><h3 class="fs-4 text-primary">개발자 커뮤니티</h3><p class="text-secondary">자유로운 토론과 Q&A를 통해 지식을 공유하고 동료 개발자들과 네트워크를 만드세요.</p></a></div>
             <div class="col text-center"><a href="/information/book" class="text-decoration-none"><div class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3 rounded-3" style="width: 4.5rem; height: 4.5rem;"><i class="bi bi-archive-fill"></i></div><h3 class="fs-4 text-primary">IT 정보 아카이브</h3><p class="text-secondary">엄선된 최신 기술 도서, 강좌, 공모전 정보를 한눈에 확인하고 경쟁력을 키우세요.</p></a></div>
             <div class="col text-center"><a href="/employmentList" class="text-decoration-none"><div class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3 rounded-3" style="width: 4.5rem; height: 4.5rem;"><i class="bi bi-briefcase-fill"></i></div><h3 class="fs-4 text-primary">팀원 & 채용</h3><p class="text-secondary">사이드 프로젝트를 함께할 팀원을 구하거나, 새로운 커리어 기회를 탐색하세요.</p></a></div>
        </div>
    </div>

    <div class="bg-light py-5">
        <div class="container">
            <h2 class="text-center fw-bold fs-1 mb-5">커뮤니티 최신 글</h2>
            <div class="row g-4 row-cols-1 row-cols-md-2">
                <div class="col"><div class="card h-100"><div class="card-header text-center"><strong>자유게시판</strong></div><div class="list-group list-group-flush"><th:block th:if="${#lists.isEmpty(freePosts)}"><span class="list-group-item text-secondary">최신 글이 없습니다.</span></th:block>
                <a th:each="post : ${freePosts}" th:href="@{/boards/{boardNo}(boardNo=${post.boardNo})}" class="list-group-item list-group-item-action text-truncate" th:text="${post.title}"></a></div></div></div>
                <div class="col"><div class="card h-100"><div class="card-header text-center"><strong>Java</strong></div><div class="list-group list-group-flush"><th:block th:if="${#lists.isEmpty(javaPosts)}"><span class="list-group-item text-secondary">최신 글이 없습니다.</span></th:block>
                <a th:each="post : ${javaPosts}" th:href="@{/boards/{boardNo}(boardNo=${post.boardNo})}" class="list-group-item list-group-item-action text-truncate" th:text="${post.title}"></a></div></div></div>
                <div class="col"><div class="card h-100"><div class="card-header text-center"><strong>JavaScript</strong></div><div class="list-group list-group-flush"><th:block th:if="${#lists.isEmpty(jsPosts)}"><span class="list-group-item text-secondary">최신 글이 없습니다.</span></th:block>
                <a th:each="post : ${jsPosts}" th:href="@{/boards/{boardNo}(boardNo=${post.boardNo})}" class="list-group-item list-group-item-action text-truncate" th:text="${post.title}"></a></div></div></div>
                <div class="col"><div class="card h-100"><div class="card-header text-center"><strong>Python</strong></div><div class="list-group list-group-flush"><th:block th:if="${#lists.isEmpty(pythonPosts)}"><span class="list-group-item text-secondary">최신 글이 없습니다.</span></th:block>
                <a th:each="post : ${pythonPosts}" th:href="@{/boards/{boardNo}(boardNo=${post.boardNo})}" class="list-group-item list-group-item-action text-truncate" th:text="${post.title}"></a></div></div></div>
            </div>
            <div class="text-center mt-4">
                <a th:href="@{/community/free}" class="btn btn-outline-secondary">전체 게시글 보러가기</a>
            </div>
        </div>
    </div>
    
    <div class="container py-5">
        <h2 class="text-center fw-bold fs-1 pb-2 border-bottom mb-5">추천 강의 정보</h2>
        <div class="swiper-container-wrapper">
            <div class="swiper lectureSwiper">
                <div class="swiper-wrapper py-3">
                    <div class="swiper-slide" th:if="${recommendedLectures != null}" th:each="lecture : ${recommendedLectures}">
                        <a th:href="${lecture.lectureSource}" target="_blank" class="card slider-card h-100">
                            <img th:src="@{/files/information/{img}(img=${lecture.file1})}" alt="강의 이미지" class="cover-image">
                            <div class="card-texts">
                                <strong th:text="${lecture.title}"></strong>
                                <div class="metadata" th:text="${lecture.userId}"></div>
                            </div>
                        </a>
                    </div>
                    <div class="swiper-slide" th:if="${#lists.isEmpty(recommendedLectures)}">
                         <div class="card slider-card h-100 justify-content-center align-items-center text-center p-4">
                            <h5 class="text-secondary">추천 강의가 없습니다.</h5>
                        </div>
                    </div>
                </div>
                <div class="swiper-pagination mt-3"></div>
            </div>
            <div class="swiper-custom-controls">
                <button class="swiper-custom-button" id="lecture-swiper-prev"><i class="bi bi-arrow-left"></i></button>
                <button class="swiper-custom-button" id="lecture-swiper-next"><i class="bi bi-arrow-right"></i></button>
            </div>
        </div>
    </div>
</div>

<th:block layout:fragment="script">
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        const lectureSwiper = new Swiper(".lectureSwiper", {
            loop: true,
            pagination: { el: ".swiper-pagination", clickable: true },
            slidesPerView: 1.5,
            spaceBetween: 20,
            breakpoints: {
                576: { slidesPerView: 2, spaceBetween: 20 },
                768: { slidesPerView: 3, spaceBetween: 30 },
                992: { slidesPerView: 4, spaceBetween: 30 },
            }
        });

        document.getElementById('lecture-swiper-prev').addEventListener('click', () => {
            lectureSwiper.slidePrev();
        });
        document.getElementById('lecture-swiper-next').addEventListener('click', () => {
            lectureSwiper.slideNext();
        });
    </script>
</th:block>
</html>